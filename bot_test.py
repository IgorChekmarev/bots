{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "0e4e67b5-4161-4274-8123-5de2e01e682f",
   "metadata": {},
   "outputs": [],
   "source": [
    "import asyncio\n",
    "from telegram import Update\n",
    "from telegram.ext import Application, CommandHandler, MessageHandler, filters, ContextTypes\n",
    "\n",
    "# –í–°–¢–ê–í–¨–¢–ï –°–í–û–ò –î–ê–ù–ù–´–ï\n",
    "TOKEN = \"7590252411:AAHYnqKN7J3KamfDj2sWk5jBWoXc7nxR7mU\"\n",
    "OWNER_ID = 1877423571  # ID –≤–ª–∞–¥–µ–ª—å—Ü–∞ (—É–∑–Ω–∞–π —É @userinfobot)\n",
    "\n",
    "async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):\n",
    "    \"\"\"–û—Ç–≤–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—É /start\"\"\"\n",
    "    user = update.effective_user\n",
    "    await update.message.reply_text(\n",
    "        f\"–ü—Ä–∏–≤–µ—Ç, {user.first_name}!\\n\"\n",
    "        \"–Ø –ø–µ—Ä–µ—Å—ã–ª–∞—é —Ç–≤–æ–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –º–æ–µ–º—É –≤–ª–∞–¥–µ–ª—å—Ü—É.\"\n",
    "    )\n",
    "\n",
    "async def forward_to_owner(update: Update, context: ContextTypes.DEFAULT_TYPE):\n",
    "    \"\"\"–ü–µ—Ä–µ—Å—ã–ª–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤–ª–∞–¥–µ–ª—å—Ü—É\"\"\"\n",
    "    user = update.effective_user\n",
    "    message = update.message\n",
    "    \n",
    "    # –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ\n",
    "    user_info = (\n",
    "        f\"üì® –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –±–æ—Ç–∞\\n\"\n",
    "        f\"üë§ –û—Ç: {user.first_name} {user.last_name or ''}\\n\"\n",
    "        f\"üÜî ID: {user.id}\\n\"\n",
    "        f\"üì± Username: @{user.username or '–Ω–µ—Ç'}\\n\"\n",
    "        f\"üí¨ –°–æ–æ–±—â–µ–Ω–∏–µ:\\n{message.text}\"\n",
    "    )\n",
    "    \n",
    "    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤–ª–∞–¥–µ–ª—å—Ü—É\n",
    "    await context.bot.send_message(\n",
    "        chat_id=OWNER_ID,\n",
    "        text=user_info\n",
    "    )\n",
    "    \n",
    "    # –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é\n",
    "    await message.reply_text(\"‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤–ª–∞–¥–µ–ª—å—Ü—É!\")\n",
    "\n",
    "async def forward_media(update: Update, context: ContextTypes.DEFAULT_TYPE):\n",
    "    \"\"\"–ü–µ—Ä–µ—Å—ã–ª–∞–µ—Ç –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –≤–ª–∞–¥–µ–ª—å—Ü—É\"\"\"\n",
    "    user = update.effective_user\n",
    "    \n",
    "    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø —Ñ–∞–π–ª–∞\n",
    "    if update.message.photo:\n",
    "        file_type = \"üì∏ –§–æ—Ç–æ\"\n",
    "        file_id = update.message.photo[-1].file_id\n",
    "    elif update.message.video:\n",
    "        file_type = \"üé• –í–∏–¥–µ–æ\"\n",
    "        file_id = update.message.video.file_id\n",
    "    elif update.message.document:\n",
    "        file_type = \"üìé –î–æ–∫—É–º–µ–Ω—Ç\"\n",
    "        file_id = update.message.document.file_id\n",
    "    elif update.message.audio:\n",
    "        file_type = \"üéµ –ê—É–¥–∏–æ\"\n",
    "        file_id = update.message.audio.file_id\n",
    "    elif update.message.voice:\n",
    "        file_type = \"üé§ –ì–æ–ª–æ—Å–æ–≤–æ–µ\"\n",
    "        file_id = update.message.voice.file_id\n",
    "    else:\n",
    "        return\n",
    "    \n",
    "    caption = (\n",
    "        f\"{file_type} –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\\n\"\n",
    "        f\"üë§ {user.first_name} {user.last_name or ''}\\n\"\n",
    "        f\"üÜî {user.id}\\n\"\n",
    "        f\"üì± @{user.username or '–Ω–µ—Ç'}\"\n",
    "    )\n",
    "    \n",
    "    # –ü–µ—Ä–µ—Å—ã–ª–∞–µ–º —Ñ–∞–π–ª –≤–ª–∞–¥–µ–ª—å—Ü—É\n",
    "    await context.bot.send_file(\n",
    "        chat_id=OWNER_ID,\n",
    "        document=file_id,\n",
    "        caption=caption\n",
    "    )\n",
    "    \n",
    "    await update.message.reply_text(\"‚úÖ –§–∞–π–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤–ª–∞–¥–µ–ª—å—Ü—É!\")\n",
    "\n",
    "async def error_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):\n",
    "    \"\"\"–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫\"\"\"\n",
    "    print(f\"–û—à–∏–±–∫–∞: {context.error}\")\n",
    "    if update:\n",
    "        await update.message.reply_text(\"‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞\")\n",
    "\n",
    "def main():\n",
    "    \"\"\"–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞\"\"\"\n",
    "    # –°–æ–∑–¥–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ\n",
    "    app = Application.builder().token(TOKEN).build()\n",
    "    \n",
    "    # –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏\n",
    "    app.add_handler(CommandHandler(\"start\", start))\n",
    "    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, forward_to_owner))\n",
    "    app.add_handler(MessageHandler(filters.PHOTO, forward_media))\n",
    "    app.add_handler(MessageHandler(filters.VIDEO, forward_media))\n",
    "    app.add_handler(MessageHandler(filters.DOCUMENT, forward_media))\n",
    "    app.add_handler(MessageHandler(filters.AUDIO, forward_media))\n",
    "    app.add_handler(MessageHandler(filters.VOICE, forward_media))\n",
    "    \n",
    "    # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫\n",
    "    app.add_error_handler(error_handler)\n",
    "    \n",
    "    print(\"–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω...\")\n",
    "    app.run_polling(allowed_updates=Update.ALL_TYPES)\n",
    "\n",
    "if __name__ == \"__main__\":\n",
    "    main()"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3 (ipykernel)",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.12.6"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
